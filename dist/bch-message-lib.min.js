!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).BchMessage=t()}}((function(){var t=function(t){var e;return function(r){return e||t(e={exports:{},parent:r},e.exports),e.exports}},e=t((function(t,r){(function(t){(function(){"use strict";r.Buffer=e,r.INSPECT_MAX_BYTES=50;function t(t){if(t>2147483647)throw new RangeError('The value "'+t+'" is invalid for option "size"');var r=new Uint8Array(t);return r.__proto__=e.prototype,r}function e(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return i(t)}return n(t,e,r)}function n(r,n,o){if("string"==typeof r)return function(r,n){if("string"==typeof n&&""!==n||(n="utf8"),!e.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var o=0|u(r,n),i=t(o),s=i.write(r,n);return s!==o&&(i=i.slice(0,s)),i}(r,n);if(ArrayBuffer.isView(r))return s(r);if(null==r)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(_(r,ArrayBuffer)||r&&_(r.buffer,ArrayBuffer))return function(t,r,n){if(r<0||t.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<r+(n||0))throw new RangeError('"length" is outside of buffer bounds');var o;return(o=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n)).__proto__=e.prototype,o}(r,n,o);if("number"==typeof r)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=r.valueOf&&r.valueOf();if(null!=i&&i!==r)return e.from(i,n,o);var f=function(r){if(e.isBuffer(r)){var n=0|a(r.length),o=t(n);return 0===o.length||r.copy(o,0,0,n),o}return void 0!==r.length?"number"!=typeof r.length||I(r.length)?t(0):s(r):"Buffer"===r.type&&Array.isArray(r.data)?s(r.data):void 0}(r);if(f)return f;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof r[Symbol.toPrimitive])return e.from(r[Symbol.toPrimitive]("string"),n,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}function o(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function i(e){return o(e),t(e<0?0:0|a(e))}function s(e){for(var r=e.length<0?0:0|a(e.length),n=t(r),o=0;o<r;o+=1)n[o]=255&e[o];return n}function a(t){if(t>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function u(t,r){if(e.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||_(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,o=arguments.length>2&&!0===arguments[2];if(!o&&0===n)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return L(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return O(t).length;default:if(i)return o?-1:L(t).length;r=(""+r).toLowerCase(),i=!0}}function f(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function c(t,r,n,o,i){if(0===t.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),I(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof r&&(r=e.from(r,o)),e.isBuffer(r))return 0===r.length?-1:h(t,r,n,o,i);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,n):Uint8Array.prototype.lastIndexOf.call(t,r,n):h(t,[r],n,o,i);throw new TypeError("val must be string, number or Buffer")}function h(t,e,r,n,o){var i,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function f(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){var c=-1;for(i=r;i<a;i++)if(f(t,i)===f(e,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===u)return c*s}else-1!==c&&(i-=i-c),c=-1}else for(r+u>a&&(r=a-u),i=r;i>=0;i--){for(var h=!0,l=0;l<u;l++)if(f(t,i+l)!==f(e,l)){h=!1;break}if(h)return i}return-1}function l(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=e.length;n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(I(a))return s;t[r+s]=a}return s}function p(t,e,r,n){return P(L(e,t.length-r),t,r,n)}function d(t,e,r,n){return P(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function g(t,e,r,n){return d(t,e,r,n)}function y(t,e,r,n){return P(O(e),t,r,n)}function w(t,e,r,n){return P(function(t,e){for(var r,n,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function m(t,e,r){return 0===e&&r===t.length?ut.fromByteArray(t):ut.fromByteArray(t.slice(e,r))}function b(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,s,a,u,f=t[o],c=null,h=f>239?4:f>223?3:f>191?2:1;if(o+h<=r)switch(h){case 1:f<128&&(c=f);break;case 2:128==(192&(i=t[o+1]))&&(u=(31&f)<<6|63&i)>127&&(c=u);break;case 3:i=t[o+1],s=t[o+2],128==(192&i)&&128==(192&s)&&(u=(15&f)<<12|(63&i)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:i=t[o+1],s=t[o+2],a=t[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(u=(15&f)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),o+=h}return function(t){var e=t.length;if(e<=v)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=v));return r}(n)}e.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(e){return!1}}(),e.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(t,e,r){return n(t,e,r)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(e,r,n){return function(e,r,n){return o(e),e<=0?t(e):void 0!==r?"string"==typeof n?t(e).fill(r,n):t(e).fill(r):t(e)}(e,r,n)},e.allocUnsafe=function(t){return i(t)},e.allocUnsafeSlow=function(t){return i(t)},e.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==e.prototype},e.compare=function(t,r){if(_(t,Uint8Array)&&(t=e.from(t,t.offset,t.byteLength)),_(r,Uint8Array)&&(r=e.from(r,r.offset,r.byteLength)),!e.isBuffer(t)||!e.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;for(var n=t.length,o=r.length,i=0,s=Math.min(n,o);i<s;++i)if(t[i]!==r[i]){n=t[i],o=r[i];break}return n<o?-1:o<n?1:0},e.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var o=e.allocUnsafe(r),i=0;for(n=0;n<t.length;++n){var s=t[n];if(_(s,Uint8Array)&&(s=e.from(s)),!e.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(o,i),i+=s.length}return o},e.byteLength=u,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)f(this,e,e+1);return this},e.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)f(this,e,e+3),f(this,e+1,e+2);return this},e.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)f(this,e,e+7),f(this,e+1,e+6),f(this,e+2,e+5),f(this,e+3,e+4);return this},e.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?b(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,r);case"utf8":case"utf-8":return b(this,e,r);case"ascii":return E(this,e,r);case"latin1":case"binary":return x(this,e,r);case"base64":return m(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},e.prototype.compare=function(t,r,n,o,i){if(_(t,Uint8Array)&&(t=e.from(t,t.offset,t.byteLength)),!e.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===r&&(r=0),void 0===n&&(n=t?t.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),r<0||n>t.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&r>=n)return 0;if(o>=i)return-1;if(r>=n)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(o>>>=0),a=(n>>>=0)-(r>>>=0),u=Math.min(s,a),f=this.slice(o,i),c=t.slice(r,n),h=0;h<u;++h)if(f[h]!==c[h]){s=f[h],a=c[h];break}return s<a?-1:a<s?1:0},e.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},e.prototype.indexOf=function(t,e,r){return c(this,t,e,r,!0)},e.prototype.lastIndexOf=function(t,e,r){return c(this,t,e,r,!1)},e.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return l(this,t,e,r);case"utf8":case"utf-8":return p(this,t,e,r);case"ascii":return d(this,t,e,r);case"latin1":case"binary":return g(this,t,e,r);case"base64":return y(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function E(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function x(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function A(t,e,r){var n,o=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>o)&&(r=o);for(var i="",s=e;s<r;++s)i+=(n=t[s])<16?"0"+n.toString(16):n.toString(16);return i}function T(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function U(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function S(t,r,n,o,i,s){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<s)throw new RangeError('"value" argument is out of bounds');if(n+o>t.length)throw new RangeError("Index out of range")}function B(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function R(t,e,r,n,o){return e=+e,r>>>=0,o||B(t,0,r,4),wt.write(t,e,r,n,23,4),r+4}function j(t,e,r,n,o){return e=+e,r>>>=0,o||B(t,0,r,8),wt.write(t,e,r,n,52,8),r+8}e.prototype.slice=function(t,r){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t);var o=this.subarray(t,r);return o.__proto__=e.prototype,o},e.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},e.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},e.prototype.readUInt8=function(t,e){return t>>>=0,e||U(t,1,this.length),this[t]},e.prototype.readUInt16LE=function(t,e){return t>>>=0,e||U(t,2,this.length),this[t]|this[t+1]<<8},e.prototype.readUInt16BE=function(t,e){return t>>>=0,e||U(t,2,this.length),this[t]<<8|this[t+1]},e.prototype.readUInt32LE=function(t,e){return t>>>=0,e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},e.prototype.readUInt32BE=function(t,e){return t>>>=0,e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},e.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},e.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},e.prototype.readInt8=function(t,e){return t>>>=0,e||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},e.prototype.readInt16LE=function(t,e){t>>>=0,e||U(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt16BE=function(t,e){t>>>=0,e||U(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt32LE=function(t,e){return t>>>=0,e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},e.prototype.readInt32BE=function(t,e){return t>>>=0,e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},e.prototype.readFloatLE=function(t,e){return t>>>=0,e||U(t,4,this.length),wt.read(this,t,!0,23,4)},e.prototype.readFloatBE=function(t,e){return t>>>=0,e||U(t,4,this.length),wt.read(this,t,!1,23,4)},e.prototype.readDoubleLE=function(t,e){return t>>>=0,e||U(t,8,this.length),wt.read(this,t,!0,52,8)},e.prototype.readDoubleBE=function(t,e){return t>>>=0,e||U(t,8,this.length),wt.read(this,t,!1,52,8)},e.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||S(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},e.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||S(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},e.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,1,255,0),this[e]=255&t,e+1},e.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},e.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},e.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},e.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},e.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var o=Math.pow(2,8*r-1);S(this,t,e,r,o-1,-o)}var i=0,s=1,a=0;for(this[e]=255&t;++i<r&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+r},e.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var o=Math.pow(2,8*r-1);S(this,t,e,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+r},e.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},e.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},e.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},e.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},e.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||S(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},e.prototype.writeFloatLE=function(t,e,r){return R(this,t,e,!0,r)},e.prototype.writeFloatBE=function(t,e,r){return R(this,t,e,!1,r)},e.prototype.writeDoubleLE=function(t,e,r){return j(this,t,e,!0,r)},e.prototype.writeDoubleBE=function(t,e,r){return j(this,t,e,!1,r)},e.prototype.copy=function(t,r,n,o){if(!e.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),o||0===o||(o=this.length),r>=t.length&&(r=t.length),r||(r=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-r<o-n&&(o=t.length-r+n);var i=o-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(r,n,o);else if(this===t&&n<r&&r<o)for(var s=i-1;s>=0;--s)t[s+r]=this[s+n];else Uint8Array.prototype.set.call(t,this.subarray(n,o),r);return i},e.prototype.fill=function(t,r,n,o){if("string"==typeof t){if("string"==typeof r?(o=r,r=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!e.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(1===t.length){var i=t.charCodeAt(0);("utf8"===o&&i<128||"latin1"===o)&&(t=i)}}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;var s;if(r>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=r;s<n;++s)this[s]=t;else{var a=e.isBuffer(t)?t:e.from(t,o),u=a.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<n-r;++s)this[s+r]=a[s%u]}return this};var C=/[^+/0-9A-Za-z-_]/g;function L(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function O(t){return ut.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(C,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function P(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function _(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function I(t){return t!=t}}).call(this)}).call(this,e({}).Buffer)})),r=t((function(t,e){(function(e){(function(){"use strict";var r={"Content-Type":"application/x-www-form-urlencoded"};function o(t,e){!h.isUndefined(t)&&h.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var i,s={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e))&&(i=n({})),i),transformRequest:[function(t,e){return y(e,"Accept"),y(e,"Content-Type"),h.isFormData(t)||h.isArrayBuffer(t)||h.isBuffer(t)||h.isStream(t)||h.isFile(t)||h.isBlob(t)?t:h.isArrayBufferView(t)?t.buffer:h.isURLSearchParams(t)?(o(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):h.isObject(t)||e&&"application/json"===e["Content-Type"]?(o(e,"application/json"),function(t,e,r){if(h.isString(t))try{return(0,JSON.parse)(t),h.trim(t)}catch(n){if("SyntaxError"!==n.name)throw n}return(0,JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||s.transitional,r=e&&e.silentJSONParsing,n=e&&e.forcedJSONParsing,o=!r&&"json"===this.responseType;if(o||n&&h.isString(t)&&t.length)try{return JSON.parse(t)}catch(i){if(o){if("SyntaxError"===i.name)throw w(i,this,"E_JSON_PARSE");throw i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};h.forEach(["delete","get","head"],(function(t){s.headers[t]={}})),h.forEach(["post","put","patch"],(function(t){s.headers[t]=h.merge(r)})),t.exports=s}).call(this)}).call(this,j)})),n=t((function(t,e){"use strict";var n=r({});t.exports=function(t){return new Promise((function(e,r){var o,i=t.data,s=t.headers,a=t.responseType;function u(){t.cancelToken&&t.cancelToken.unsubscribe(o),t.signal&&t.signal.removeEventListener("abort",o)}h.isFormData(i)&&delete s["Content-Type"];var f=new XMLHttpRequest;if(t.auth){var c=t.auth.username||"",l=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.Authorization="Basic "+btoa(c+":"+l)}var d=E(t.baseURL,t.url);function g(){if(f){var n="getAllResponseHeaders"in f?A(f.getAllResponseHeaders()):null,o={data:a&&"text"!==a&&"json"!==a?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:t,request:f};b((function(t){e(t),u()}),(function(t){r(t),u()}),o),f=null}}if(f.open(t.method.toUpperCase(),p(d,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(r(m("Request aborted",t,"ECONNABORTED",f)),f=null)},f.onerror=function(){r(m("Network Error",t,null,f)),f=null},f.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",o=t.transitional||n.transitional;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),r(m(e,t,o.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",f)),f=null},h.isStandardBrowserEnv()){var y=(t.withCredentials||T(d))&&t.xsrfCookieName?v.read(t.xsrfCookieName):void 0;y&&(s[t.xsrfHeaderName]=y)}"setRequestHeader"in f&&h.forEach(s,(function(t,e){void 0===i&&"content-type"===e.toLowerCase()?delete s[e]:f.setRequestHeader(e,t)})),h.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),a&&"json"!==a&&(f.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(o=function(t){f&&(r(!t||t&&t.type?new U("canceled"):t),f.abort(),f=null)},t.cancelToken&&t.cancelToken.subscribe(o),t.signal&&(t.signal.aborted?o():t.signal.addEventListener("abort",o))),i||(i=null),f.send(i)}))}})),o=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}},i=Object.prototype.toString;function s(t){return"[object Array]"===i.call(t)}function a(t){return void 0===t}function u(t){return null!==t&&"object"==typeof t}function f(t){if("[object Object]"!==i.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function c(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),s(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}var h={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:function(t){return null!==t&&!a(t)&&null!==t.constructor&&!a(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:u,isPlainObject:f,isUndefined:a,isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isStream:function(t){return u(t)&&function(t){return"[object Function]"===i.call(t)}(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function t(){var e={};function r(r,n){f(e[n])&&f(r)?e[n]=t(e[n],r):f(r)?e[n]=t({},r):s(r)?e[n]=r.slice():e[n]=r}for(var n=0,o=arguments.length;n<o;n++)c(arguments[n],r);return e},extend:function(t,e,r){return c(e,(function(e,n){t[n]=r&&"function"==typeof e?o(e,r):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}};function l(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var p=function(t,e,r){if(!e)return t;var n;if(r)n=r(e);else if(h.isURLSearchParams(e))n=e.toString();else{var o=[];h.forEach(e,(function(t,e){null!=t&&(h.isArray(t)?e+="[]":t=[t],h.forEach(t,(function(t){h.isDate(t)?t=t.toISOString():h.isObject(t)&&(t=JSON.stringify(t)),o.push(l(e)+"="+l(t))})))})),n=o.join("&")}if(n){var i=t.indexOf("#");-1!==i&&(t=t.slice(0,i)),t+=(-1===t.indexOf("?")?"?":"&")+n}return t},d={};function g(){this.handlers=[]}g.prototype.use=function(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},g.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},g.prototype.forEach=function(t){h.forEach(this.handlers,(function(e){null!==e&&t(e)}))},d=g;var y=function(t,e){h.forEach(t,(function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])}))},w=function(t,e,r,n,o){return t.config=e,r&&(t.code=r),t.request=n,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},m=function(t,e,r,n,o){var i=new Error(t);return w(i,e,r,n,o)},b=function(t,e,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(m("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)},v=h.isStandardBrowserEnv()?{write:function(t,e,r,n,o,i){var s=[];s.push(t+"="+encodeURIComponent(e)),h.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),h.isString(n)&&s.push("path="+n),h.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},E=function(t,e){return t&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e},x=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],A=function(t){var e,r,n,o={};return t?(h.forEach(t.split("\n"),(function(t){if(n=t.indexOf(":"),e=h.trim(t.substr(0,n)).toLowerCase(),r=h.trim(t.substr(n+1)),e){if(o[e]&&x.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([r]):o[e]?o[e]+", "+r:r}})),o):o},T=h.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=n(window.location.href),function(e){var r=h.isString(e)?n(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0},U={};function S(t){this.message=t}S.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},S.prototype.__CANCEL__=!0,U=S;var B,R,j={},C=j={};function L(){throw new Error("setTimeout has not been defined")}function O(){throw new Error("clearTimeout has not been defined")}function P(t){if(B===setTimeout)return setTimeout(t,0);if((B===L||!B)&&setTimeout)return B=setTimeout,setTimeout(t,0);try{return B(t,0)}catch(e){try{return B.call(null,t,0)}catch(e){return B.call(this,t,0)}}}!function(){try{B="function"==typeof setTimeout?setTimeout:L}catch(t){B=L}try{R="function"==typeof clearTimeout?clearTimeout:O}catch(t){R=O}}();var _,I=[],k=!1,N=-1;function M(){k&&_&&(k=!1,_.length?I=_.concat(I):N=-1,I.length&&D())}function D(){if(!k){var t=P(M);k=!0;for(var e=I.length;e;){for(_=I,I=[];++N<e;)_&&_[N].run();N=-1,e=I.length}_=null,k=!1,function(t){if(R===clearTimeout)return clearTimeout(t);if((R===O||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(t);try{R(t)}catch(e){try{return R.call(null,t)}catch(e){return R.call(this,t)}}}(t)}}function q(t,e){this.fun=t,this.array=e}function F(){}C.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];I.push(new q(t,e)),1!==I.length||k||P(D)},q.prototype.run=function(){this.fun.apply(null,this.array)},C.title="browser",C.browser=!0,C.env={},C.argv=[],C.version="",C.versions={},C.on=F,C.addListener=F,C.once=F,C.off=F,C.removeListener=F,C.removeAllListeners=F,C.emit=F,C.prependListener=F,C.prependOnceListener=F,C.listeners=function(t){return[]},C.binding=function(t){throw new Error("process.binding is not supported")},C.cwd=function(){return"/"},C.chdir=function(t){throw new Error("process.chdir is not supported")},C.umask=function(){return 0};var H=r({}),z=function(t,e,r){var n=this||H;return h.forEach(r,(function(r){t=r.call(n,t,e)})),t},J=function(t){return!(!t||!t.__CANCEL__)},G=r({});function W(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new U("canceled")}var $,X=function(t){return W(t),t.headers=t.headers||{},t.data=z.call(t,t.data,t.headers,t.transformRequest),t.headers=h.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),h.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||G.adapter)(t).then((function(e){return W(t),e.data=z.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return J(e)||(W(t),e&&e.response&&(e.response.data=z.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))},K=function(t,e){e=e||{};var r={};function n(t,e){return h.isPlainObject(t)&&h.isPlainObject(e)?h.merge(t,e):h.isPlainObject(e)?h.merge({},e):h.isArray(e)?e.slice():e}function o(r){return h.isUndefined(e[r])?h.isUndefined(t[r])?void 0:n(void 0,t[r]):n(t[r],e[r])}function i(t){if(!h.isUndefined(e[t]))return n(void 0,e[t])}function s(r){return h.isUndefined(e[r])?h.isUndefined(t[r])?void 0:n(void 0,t[r]):n(void 0,e[r])}function a(r){return r in e?n(t[r],e[r]):r in t?n(void 0,t[r]):void 0}var u={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a};return h.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=u[t]||o,n=e(t);h.isUndefined(n)&&e!==a||(r[t]=n)})),r},V="0.24.0",Y=V,Q={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){Q[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}}));var Z={};Q.transitional=function(t,e,r){function n(t,e){return"[Axios v"+Y+"] Transitional option '"+t+"'"+e+(r?". "+r:"")}return function(r,o,i){if(!1===t)throw new Error(n(o," has been removed"+(e?" in "+e:"")));return e&&!Z[o]&&(Z[o]=!0,console.warn(n(o," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(r,o,i)}};var tt={},et=($={assertOptions:function(t,e,r){if("object"!=typeof t)throw new TypeError("options must be an object");for(var n=Object.keys(t),o=n.length;o-- >0;){var i=n[o],s=e[i];if(s){var a=t[i],u=void 0===a||s(a,i,t);if(!0!==u)throw new TypeError("option "+i+" must be "+u)}else if(!0!==r)throw Error("Unknown option "+i)}},validators:Q}).validators;function rt(t){this.defaults=t,this.interceptors={request:new d,response:new d}}rt.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=K(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;void 0!==e&&$.assertOptions(e,{silentJSONParsing:et.transitional(et.boolean),forcedJSONParsing:et.transitional(et.boolean),clarifyTimeoutError:et.transitional(et.boolean)},!1);var r=[],n=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(n=n&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var o,i=[];if(this.interceptors.response.forEach((function(t){i.push(t.fulfilled,t.rejected)})),!n){var s=[X,void 0];for(Array.prototype.unshift.apply(s,r),s=s.concat(i),o=Promise.resolve(t);s.length;)o=o.then(s.shift(),s.shift());return o}for(var a=t;r.length;){var u=r.shift(),f=r.shift();try{a=u(a)}catch(c){f(c);break}}try{o=X(a)}catch(c){return Promise.reject(c)}for(;i.length;)o=o.then(i.shift(),i.shift());return o},rt.prototype.getUri=function(t){return t=K(this.defaults,t),p(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},h.forEach(["delete","get","head","options"],(function(t){rt.prototype[t]=function(e,r){return this.request(K(r||{},{method:t,url:e,data:(r||{}).data}))}})),h.forEach(["post","put","patch"],(function(t){rt.prototype[t]=function(e,r,n){return this.request(K(n||{},{method:t,url:e,data:r}))}})),tt=rt;var nt;function ot(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var r=this;this.promise.then((function(t){if(r._listeners){var e,n=r._listeners.length;for(e=0;e<n;e++)r._listeners[e](t);r._listeners=null}})),this.promise.then=function(t){var e,n=new Promise((function(t){r.subscribe(t),e=t})).then(t);return n.cancel=function(){r.unsubscribe(e)},n},t((function(t){r.reason||(r.reason=new U(t),e(r.reason))}))}ot.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},ot.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},ot.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},ot.source=function(){var t;return{token:new ot((function(e){t=e})),cancel:t}},nt=ot;var it={},st=function t(e){var r=new tt(e),n=o(tt.prototype.request,r);return h.extend(n,tt.prototype,r),h.extend(n,r),n.create=function(r){return t(K(e,r))},n}(r({}));st.Axios=tt,st.Cancel=U,st.CancelToken=nt,st.isCancel=J,st.VERSION=V,st.all=function(t){return Promise.all(t)},st.spread=function(t){return function(e){return t.apply(null,e)}},st.isAxiosError=function(t){return"object"==typeof t&&!0===t.isAxiosError},(it=st).default=st;for(var at=it,ut={toByteArray:function(t){var e,r,n=gt(t),o=n[0],i=n[1],s=new ht(function(t,e,r){return 3*(e+r)/4-r}(0,o,i)),a=0,u=i>0?o-4:o;for(r=0;r<u;r+=4)e=ct[t.charCodeAt(r)]<<18|ct[t.charCodeAt(r+1)]<<12|ct[t.charCodeAt(r+2)]<<6|ct[t.charCodeAt(r+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;return 2===i&&(e=ct[t.charCodeAt(r)]<<2|ct[t.charCodeAt(r+1)]>>4,s[a++]=255&e),1===i&&(e=ct[t.charCodeAt(r)]<<10|ct[t.charCodeAt(r+1)]<<4|ct[t.charCodeAt(r+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e),s},fromByteArray:function(t){for(var e,r=t.length,n=r%3,o=[],i=0,s=r-n;i<s;i+=16383)o.push(yt(t,i,i+16383>s?s:i+16383));return 1===n?(e=t[r-1],o.push(ft[e>>2]+ft[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],o.push(ft[e>>10]+ft[e>>4&63]+ft[e<<2&63]+"=")),o.join("")}},ft=[],ct=[],ht="undefined"!=typeof Uint8Array?Uint8Array:Array,lt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pt=0,dt=lt.length;pt<dt;++pt)ft[pt]=lt[pt],ct[lt.charCodeAt(pt)]=pt;function gt(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function yt(t,e,r){for(var n,o,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),i.push(ft[(o=n)>>18&63]+ft[o>>12&63]+ft[o>>6&63]+ft[63&o]);return i.join("")}ct["-".charCodeAt(0)]=62,ct["_".charCodeAt(0)]=63;var wt={read:function(t,e,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,f=u>>1,c=-7,h=r?o-1:0,l=r?-1:1,p=t[e+h];for(h+=l,i=p&(1<<-c)-1,p>>=-c,c+=a;c>0;i=256*i+t[e+h],h+=l,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=n;c>0;s=256*s+t[e+h],h+=l,c-=8);if(0===i)i=1-f;else{if(i===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),i-=f}return(p?-1:1)*s*Math.pow(2,i-n)},write:function(t,e,r,n,o,i){var s,a,u,f=8*i-o-1,c=(1<<f)-1,h=c>>1,l=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?l/u:l*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,o),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,o),s=0));o>=8;t[r+p]=255&a,p+=d,a/=256,o-=8);for(s=s<<o|a,f+=o;f>0;t[r+p]=255&s,p+=d,s/=256,f-=8);t[r+p-d]|=128*g}},mt={};(function(t){(function(){mt=class{constructor(t={}){if(!t.bchjs)throw new Error("bch-js instance must be passed in the config object when instantiating.");this.bchjs=t.bchjs,this.interface="rest-api","consumer-api"===t.interface&&(this.interface="consumer-api"),this.bchConsumer=new class{constructor(t={}){this.restURL=t.restURL,this.restURL||(this.restURL="https://free-bch.fullstack.cash",t.restURL=this.restURL),this.bch=new class{constructor(t={}){if(this.restURL=t.restURL,!this.restURL)throw new Error("restURL required when instantiating BCH library");this.axios=at}async getBalance(t){if("string"!=typeof t)throw new Error("Input must be a string containing bitcoincash address");const e={addresses:[t]};return(await this.axios.post(this.restURL+"/bch/balance",e)).data}async getUtxos(t){if("string"!=typeof t)throw new Error("Input must be a string containing bitcoincash address");const e={address:t};return(await this.axios.post(this.restURL+"/bch/utxos",e)).data}async getTransactions(t){if("string"!=typeof t)throw new Error("Input must be a string containing bitcoincash address");const e={address:t};return(await this.axios.post(this.restURL+"/bch/transactions",e)).data}async sendTx(t){if("string"!=typeof t)throw new Error("Input must be a string containing hex representation of a transaction");const e={hex:t};return(await this.axios.post(this.restURL+"/bch/broadcast",e)).data}async getTransaction(t){if("string"!=typeof t)throw new Error("Input must be a string containing a TXID");const e={txid:t};return(await this.axios.post(this.restURL+"/bch/transaction",e)).data}}(t),this.msg=new class{constructor(t={}){if(this.restURL=t.restURL,!this.restURL)throw new Error("restURL required when instantiating Message library");this.axios=at}async getPubKey(t){if("string"!=typeof t)throw new Error("Input must be a string containing bitcoincash address");const e={address:t};return(await this.axios.post(this.restURL+"/bch/pubkey",e)).data}}(t)}}(t)}async memoPush(e,r,n=""){try{if(console.log("starting memoPush()"),"string"!=typeof r)throw new Error("WIF must be a string of a private key.");const o=this.bchjs.ECPair.fromWIF(r),i=this.bchjs.ECPair.toCashAddress(o),s=await this.bchjs.Electrumx.utxo(i),a=this.bchjs.Utxo.findBiggestUtxo(s.utxos),u=new this.bchjs.TransactionBuilder,f=a.value,c=a.tx_pos,h=a.tx_hash;u.addInput(h,c);const l=500;u.addOutput(i,f-l),console.log(`Encoding this in OP_RETURN: ${n}${e}`);const p=[this.bchjs.Script.opcodes.OP_RETURN,t.from("6d02","hex"),t.from(`${n}${e}`)],d=this.bchjs.Script.encode2(p);let g;return u.addOutput(d,0),u.sign(0,o,g,u.hashTypes.SIGHASH_ALL,f),u.build().toHex()}catch(o){throw console.error("Error in memoPush()"),o}}async memoRead(t,e="",r=1){try{if("string"!=typeof t)throw new Error("bchAddr must be a string of a BCH address.");if("number"!=typeof r)throw new Error("numChunks must be a number.");const n=await this.getTransactions(t,r),o=[];for(let t=0;t<n.length;t++){const r=n[t];for(let t=0;t<r.vout.length;t++){const n=r.vout[t].scriptPubKey.asm,i=this.decodeTransaction(n,"621");if(i){const t=this.filterMSG(i,e);if(t){const e=r.vout[0].scriptPubKey.addresses[0];t.sender=e,t.txid=r.txid,t.time=r.time,o.push(t)}}}}return o}catch(n){throw console.error("Error in memoRead()"),n}}async writeMsgSignal(e,r,n,o){try{if("string"!=typeof e)throw new Error("WIF must be a string of a private key.");if("string"!=typeof r)throw new Error("IPFS hash must be a string.");if(!Array.isArray(n))throw new Error("receivers must be an array of a BCH address.");if(!n.length)throw new Error("receivers array can not be empty.");if("string"!=typeof o)throw new Error("subject must be a string.");const i=this.bchjs.ECPair.fromWIF(e),s=this.bchjs.ECPair.toCashAddress(i),a=await this.bchjs.Electrumx.utxo(s);if(!a.success)throw new Error("Could not get UTXOs");const u=this.bchjs.Utxo.findBiggestUtxo(a.utxos),f=new this.bchjs.TransactionBuilder,c=u.satoshis,h=u.tx_pos,l=u.tx_hash;f.addInput(l,h);const p=500,d=546;f.addOutput(s,c-p-d*n.length);const g=[this.bchjs.Script.opcodes.OP_RETURN,t.from("6dd2","hex"),t.from(`MSG IPFS ${r} ${o}`)],y=this.bchjs.Script.encode2(g);f.addOutput(y,0);for(let t=0;t<n.length;t++)f.addOutput(n[t],d);let w;return f.sign(0,i,w,f.hashTypes.SIGHASH_ALL,c),f.build().toHex()}catch(i){throw console.error("Error in writeMsgSignal()"),i}}async getTransactions(t,e=1,r=500){try{const n=await this.bchjs.Electrumx.transactions(t);if(!n.success)throw new Error("No transaction history could be found for "+t);const o=await this.bchjs.Electrumx.sortAllTxs(n.transactions),i=this.bchjs.Util.chunk20(o);let s=[];if(0===e||i.length<=e)s=i;else for(let t=0;t<e;t++)s.push(i[t]);let a=[];for(let t=0;t<s.length;t++){const e=s[t].map(t=>t.tx_hash);await this.bchjs.Util.sleep(r);const n=await this.bchjs.RawTransactions.getRawTransaction(e,!0);a=[...a,...n]}return a}catch(n){throw console.error("Error in memo.js/getTransactions()"),n}}async readMsgSignal(t,e="MSG IPFS",r=1){try{if("string"!=typeof t)throw new Error("bchAddr must be a string of a BCH address.");if("number"!=typeof r)throw new Error("numChunks must be a number.");const n=await this.getTransactions(t,r),o=[];for(let t=0;t<n.length;t++){const r=n[t];for(let t=0;t<r.vout.length;t++){const n=r.vout[t].scriptPubKey.asm,i=this.decodeTransaction(n,"-21101");if(i){const t=this.filterMSG(i,e);if(t){const e=r.vout[0].scriptPubKey.addresses[0];if(t.sender=e,t.txid=r.txid,t.time=r.time,!t.time){const e=new Date;t.time=Math.floor(e.getTime()/1e3)}o.push(t)}}}}return o}catch(n){throw console.error("Error in readMsgSignal()"),n}}sortTxsByHeight(t,e="ASCENDING"){return"ASCENDING"===e?t.sort((t,e)=>t.height-e.height):t.sort((t,e)=>e.height-t.height)}decodeTransaction(e,r="621"){try{if("string"!=typeof e)throw new Error("asm must be a string");const n=e.split(" ");return"OP_RETURN"===n[0]&&n[1]===r&&t.from(n[2],"hex").toString()}catch(n){return console.warn("Error in decodeTransaction: "),!1}}filterMSG(t,e){try{if("string"!=typeof e)throw new Error("preface is required");if(t.indexOf(e)>-1){const r=t.split(e+" ")[1],n=r.indexOf(" ");return{hash:r.slice(0,n),subject:r.slice(n+1,r.length)}}return!1}catch(r){return!1}}async findName(t,e=1){try{if("string"!=typeof t)throw new Error("bchAddr must be a string of a BCH address.");const r=await this.getTransactions(t,e);for(let t=0;t<r.length;t++){const e=r[t];for(let t=0;t<e.vout.length;t++){const r=e.vout[t].scriptPubKey.asm,n=this.decodeTransaction(r,"365");if(n)return n}}return!1}catch(r){throw console.error("Error in findName()"),r}}}}).call(this)}).call(this,e({}).Buffer);return class{constructor(t={}){if(!t.bchjs)throw new Error("bch-js instance must be passed in the config object when instantiating.");this.bchjs=t.bchjs,this.memo=new mt(t),this.merit=new class{constructor(t){if(!t||!t.bchjs)throw new Error("bch-js instance must be passed in the config object when instantiating.");this.bchjs=t.bchjs}async getTokenUtxos(t,e,r){try{if(!e)throw new Error("tokenId must be specified!");t=this.bchjs.SLP.Address.toCashAddress(t);const n=await this.bchjs.Electrumx.utxo([t]);return(await this.bchjs.SLP.Utils.hydrateUtxos(n.utxos,{utxoDelay:r})).slpUtxos[0].utxos.filter(t=>t.tokenId&&t.tokenId.includes(e))}catch(n){throw console.error("Error in merit.js/getTokenUtxos()"),n}}getTokenQuantity(t){try{let e=0;return t.map(t=>{e+=Number(t.tokenQty)}),e}catch(e){throw console.error("Error in merit.js/getTokenQuantity()"),e}}async calcMerit(t,e){try{if(!Array.isArray(t))throw new Error("Input hydratedUtxo must be an array");const r=this.bchjs.SLP.Address.toCashAddress(e),n=144,o=await this.bchjs.Blockchain.getBlockCount(),i=[];for(let e=0;e<t.length;e++){const s=t[e];let a=s.height;const u=await this.getParentAge(s.tx_hash,r);u&&(a=u.height);let f=(o-a)/n;f=this.bchjs.Util.floor2(f),0===s.height&&(f=0);const c=Number(s.tokenQty)*f;s.age=f,s.merit=Math.floor(c),i.push(s)}return i}catch(r){throw console.error("Error in merit.js/getMerit()"),r}}async getParentAge(t,e){try{let r=!1;for(;t;){const n=await this.findTokenParent(t,e);t=n.tx_hash,n&&(r=n)}return r}catch(r){throw console.error("Error in merit.js/getParentAge()"),r}}async findTokenParent(t,e){try{const r=(await this.bchjs.RawTransactions.getRawTransaction(t,!0)).vin.map(t=>({txid:t.txid,vout:t.vout})),n=await this.bchjs.Electrumx.transactions(e),o={index:null,height:null,utxo:!1};for(let t=0;t<r.length;t++){const e=r[t].txid,i=n.transactions.filter(t=>t.tx_hash===e);if(i.length>0)for(let n=0;n<i.length;n++){let e=i[n];e.tx_pos=r[t].vout;const s=[{utxos:[e]}];(e=(await this.bchjs.SLP.Utils.hydrateUtxos(s)).slpUtxos[0].utxos[0]).isValid&&(o.height?e.height<o.height&&(o.height=e.height,o.index=t,o.utxo=e):(o.height=e.height,o.index=t,o.utxo=e))}}return o.utxo}catch(r){throw console.error("Error in findTokenParent()"),r}}async agMerit(t,e,r){try{if(!t)throw new Error("an address must be specified!");if(!e)throw new Error("tokenId must be specified!");const n=await this.getTokenUtxos(t,e,r),o=await this.calcMerit(n,t);let i=0;return o.map(t=>i+=t.merit),Math.floor(i)}catch(n){throw console.error("Error in merit.js/agMerit()"),n}}}(t)}}}));